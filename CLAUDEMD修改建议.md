下面是我通读 CLAUDE.md 后，按“实现现状 vs 文档描述”的差异点与改进建议（仅提出意见，不动代码/文档）。

架构与实现不一致

分险种上下限: 文档仍以统一的 ss_base_floor/cap 描述三险上下限；新引擎与明细表已按险种分开基数调整。建议在文档中明确每险种独立上下限字段，并将统一社保上下限标记为已废弃。
明细结果表命名: 文档同时出现两套命名与脚本（calculation_results_wide_2023h1 与 calculate_result_2023_H1_wide）。建议统一为后一套“8张分表”的命名，废弃 manual_create_tables.sql:1 方案，保留 create_8_calculation_tables.sql:1。
员工主表: 文档给出 employees 表结构，但仓库建表脚本仅有 salary_records/policy_rules/import_logs（未见 employees 表）。建议删除或改为“可选表”，并注明当前实现以 salary_records.hire_date 为准。
期间解释: 文档多处提“2024H2 仅至9月”，但表结构没有技术限制。建议在文档中把“数据覆盖范围”与“表结构周期”分开描述，避免误解。
数据库字段与导入逻辑

salary_month 格式: 文档与表为 DATE 类型（create_tables.sql:1），而前端导入过程最初保留中文月份名再传（解析时也以中文月份匹配）。建议明确导入阶段需将 Sheet 名统一转换为 YYYY-MM-01 写库，避免查询/聚合歧义。
import_logs 可用性: 文档任务中写“暂跳过 import_logs（权限问题）”，但 create_tables.sql:52 已创建该表，代码里仅注释掉写入。建议在文档澄清：表已存在，RLS/权限就绪后启用；或明确当前阶段仅日志到控制台。
xuhao/xuhao2 字段: 代码导入层（src/lib/database.ts:39）构造 xuhao/xuhao2，但 create_tables.sql:1 中的 salary_records 不含该字段。建议文档明确“序号字段”为可选扩展，并标注表结构需要相应扩展或移除该字段写入。
生育险处理: 文档在“新引擎8表”处说明“删除生育保险”，但 policy_rules 仍含 maternity_rate_enterprise。建议在文档中说明“为兼容保留，但当前不参与计算”，避免读者混淆。
代码/类型与文档

新引擎上下限读取: 文档描述“分险种上下限”，但 src/lib/newCalculator.ts:64 仍用统一的 rules.ss_base_floor/cap 对养老/医疗/失业三险做夹逼。建议文档明确“代码待更新为分险种读取”，或优先更新代码并在文档标注旧逻辑已废弃。
旧引擎段落: 文档中混用/并列旧引擎与新引擎（按自然年 vs 社保年度）。建议在文档开头明确：以“新引擎”为权威，旧引擎仅存档参照，避免团队误用。
类型一致性: 文档写到“清理冗余字段（删除个人缴费比例与备注）”，但 create_tables.sql:1 与 src/lib/types.ts:26 仍含员工缴费比例与备注字段。建议文档更新为“当前保留但不参与前端计算”。
工具链与安全

包管理与命令: 文档推荐 Bun 并展示 Bun 命令，但仓库以 npm 为主（package.json:1）。建议统一对外推荐 npm 并保留 Bun 为可选（或补充 Bun 配置与脚本）。
状态管理: 文档写“Zustand（可选）”，代码暂未使用。建议删除或在“可选项”中标明“未引入”。
实时订阅: 文档写“Supabase 实时订阅”，代码未体现。建议删除或放入“未来计划”。
密钥暴露风险: 文档示例中出现 service role key 的导出命令。建议删除或改为“仅在服务端使用 Service Role Key，不在客户端或文档示例中展示具体值”，并强调不要在浏览器端暴露。
流程与指引

初始化与重置: 文档给出 supabase db reset 等本地 CLI 指令，但实际使用的是托管 Supabase 实例。建议把数据库初始化流程改为“在 Supabase 控制台执行 SQL 文件列表”，并给出顺序（先基础表，再规则表，再8张分表）。
任务清单与阶段: 清单中大量“⏳/待办”且与现状有冲突（例如 import_logs 状态、分险种上下限）。建议压缩/重排任务，提炼为“近期上线所需关键项”，并将已废弃的旧实施路径移除，避免误导。
编码问题: 文档中存在多处乱码“�?”（可能是编码导致）。建议统一保存为 UTF-8 并全文检查术语与标点，提升可读性。
术语与可读性

期间/分类说明: 建议在“员工分类”小节明确“社保年度（7月切换）+ 参考工资滞后策略”的四象限表述，并给出 A/B/C × H1/H2 的参考工资选择对照表，便于校验。
汇总表设计: 文档目前只写到“8张明细表”。建议新增“统一汇总表”的说明（year/period/assumption/employee_id 唯一键，合计各险种与总计），以支持期间汇总与报表。