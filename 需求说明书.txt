需求说明书：五险一金尽职调查网站
版本：V1
日期：2025-08-27

1. 项目目标与愿景
开发一个专业的Web应用，作为企业尽职调查的核心工具。该网站旨在通过自动化批量测算，精准对比企业（以佛山地区为例）在特定时期内（当前为2023年1月-2024年9月）的五险一金理论应缴额与实际缴纳额，从而高效识别潜在的合规风险（如少缴、漏缴）。

2. 核心业务逻辑
2.1. 测算周期

当前目标：2023年1月1日至2023年12月31日，以及2024年1月1日至2024年9月30日。

2.2. 核心规则

调基时间点：定为每年的7月1日。系统在处理1-6月的数据时，会应用上一年度的标准；处理7-12月的数据时，会应用当年度更新的标准。

2.3. 员工分类逻辑 (动态定义)

员工的“老员工”身份是相对于被计算年份动态变化的：

在测算【2023年】数据时:

A类 (老员工): 2022年1月1日之前入职。

B类 (N-1年新员工): 2022年度入职。

C类 (当年新员工): 2023年度入职。

在测算【2024年】数据时:

A类 (老员工): 2023年1月1日之前入职。

B类 (N-1年新员工): 2023年度入职。

C类 (当年新员工): 2024年度入职。

2.4. 【参考工资】计算逻辑 (含特殊规则)

特殊规则：由于缺失2021年工资数据，在计算【2023年】A类老员工的基数时，统一使用其【2022年的月均工资】作为参考基准。

通用规则:

测算2023年时:

A类员工 (1-12月): 参考 2022年月均工资。

B类员工 (1-6月): 参考 入职首月工资。

B类员工 (7-12月): 参考 2022年月均工资。

C类员工 (入职后): 参考 入职首月工资。

测算2024年时:

A类员工 (1-6月): 参考 2022年月均工资。

A类员工 (7-12月): 参考 2023年月均工资。

B类员工 (1-6月): 参考 入职首月工资。

B类员工 (7-12月): 参考 2023年月均工资。

C类员工 (入职后): 参考 入职首月工资。

2.5. 【缴纳基数】双重假设

系统必须支持两种独立的测算假设，并能分别执行和展示结果：

假设一 (宽口径): 法定缴纳基数应为 应发工资合计。

假设二 (窄口径): 法定缴纳基数仅为 正常工作时间工资。

3. 数据处理与系统功能
3.1. 数据上传与管理

网站需提供用户界面，支持上传三类核心数据文件（Excel/CSV）：

年度工资数据 (包含 应发工资合计 和 正常工作时间工资 列)。

佛山政策规定数据。

实际缴纳数据 (如果与工资数据分离)。

后端存储：所有上传的数据将解析并保存到 Supabase 数据库表中。

3.2. 数据输入标准格式 (约定)

工资数据文件：必须包含 员工ID (文本), 入职日期 (日期), 工资月份 (日期), 应发工资合计 (数值), 正常工作时间工资 (数值)。

政策规定文件 (标准化后)：建议处理成一个标准表，行为适用周期 (例如 '2023-01', '2023-07')，列为各项具体政策值，例如：基数上限_社保, 基数下限_社保, 基数上限_公积金, 基数下限_公积金, 个人养老比例, 企业养老比例... 等。

实际缴纳数据文件：必须包含 员工ID, 工资月份，以及明确的实际缴纳额列名（如 社保实缴, 公积金实缴）。

3.3. 核心功能：批量测算与对比

用户上传完数据后，可启动批量处理任务。

系统将对2023年1月至2024年9月的每一位员工，同时基于两种假设分别执行测算。

自动计算两种假设下的“理论应缴额”与“实际缴纳额”的差额。

3.4. 结果呈现

以数据表格的形式清晰呈现对比结果。

表格结构以“员工+月份”为单位，每行展示一个员工在一个月的对比情况，列中应包含：

员工ID, 月份

理论基数 (假设一), 理论应缴 (假设一), 差异 (假设一)

理论基数 (假设二), 理论应缴 (假设二), 差异 (假设二)

实际缴纳额

提供基础的筛选和排序功能。